<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="./Style.css">
        <title>Pr치ctica 17</title>
    </head>
    <body>
        <script>
            let miJSON = 
            `{
                "idPedido":"faa-8444",
                "pedidos":[
                    {"idProducto":"info005","nombre":"Placa_Arduino_one","destPostal":"Abarcable"},
                    {"idProducto":"info041","nombre":"Placa_Raspberry_3","destPostal":"No abarcable"},
                    {"idProducto":"gadget024","nombre":"usb_Multi_5puertos","destPostal":"Abarcable"}
            ]}`;

            /*Declaramos una nueva variable Map a la que le pasamos Object.entries para
            obtenr los datos de la estructura clave valor y a su vez en su interior 
            JSON.parse que traduce el formato JSON a tipo objeto.*/
            var map = new Map(Object.entries(JSON.parse(miJSON)));

            /*Con map.get() obtenemos el valor de idPedido.*/
            document.write(`<h2>idPedido: ${map.get("idPedido")}</h2>`);
            
            /*Se escribe una tabla HTML con document.write(). Esta mostrar치 los atributos 
            de cada elemento.*/
            document.write(`<table border='10'>`);
            document.write(`<tr><th></th><th>idProducto</th><th>Nombre</th><th>destPostal</th></tr>`);

            /*Esta variable servir치 para darle nombre a cada elemento de la tabla.*/
            var i = 1;

            /*Mediante for of se recorre el array pedidos que se obtiene con map.get().
            Luego con cada elemento accedemos a la propiedad necesaria mediante el punto.
            Si la propiedad pedido.destPostal es igual a Abarcable se pintar치 la fila de 
            verde, en caso contrario de rojo mediante una clase css.*/
            for(pedido of map.get("pedidos")){
                if(pedido.destPostal == "Abarcable"){
                    document.write(`<tr class='filaVerde'><th>Producto ${i}</th><td>${pedido.idProducto}</td><td>${pedido.nombre}</td><td>${pedido.destPostal}</td></tr>`);
                }else{
                    document.write(`<tr class='filaRoja'><th>Producto ${i}</th><td>${pedido.idProducto}</td><td>${pedido.nombre}</td><td>${pedido.destPostal}</td></tr>`);
                }

                i++;
            }

            document.write(`</table>`);
        </script>
    </body>
</html>